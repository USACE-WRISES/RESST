<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>RESST | Redirecting…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="refresh" content="0; url=https://experience.arcgis.com/experience/b1eec438459e45c284df2fcf89e5d8e0" />
  <script src="redirect-config.js"></script>
  <style>
    :root {
      color-scheme: light dark;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      background: #0b1a36;
      color: #f4f8ff;
      text-align: center;
      padding: 1.5rem;
    }
    main {
      max-width: 32rem;
      background: rgba(9, 28, 66, 0.8);
      border-radius: 1rem;
      padding: 2.5rem 2rem;
      box-shadow: 0 1rem 3rem rgba(0, 0, 0, 0.35);
    }
    h1 {
      font-size: 1.6rem;
      margin-bottom: 0.75rem;
    }
    p {
      margin: 0.75rem 0;
      line-height: 1.6;
    }
    a {
      color: #7bc4ff;
    }
    noscript p {
      margin-top: 1.5rem;
      font-size: 0.95rem;
    }
  </style>
  <script>
    (function () {
      var DEFAULT_URL = 'https://experience.arcgis.com/experience/b1eec438459e45c284df2fcf89e5d8e0';
      var config = window.REDIRECT_CONFIG || {};
      var targetUrl = typeof config.url === 'string' && config.url.trim() !== '' ? config.url : DEFAULT_URL;
      var delayMs = typeof config.delayMs === 'number' && config.delayMs >= 0 ? config.delayMs : 0;

      function updateMetaRefresh(seconds, url) {
        var meta = document.querySelector('meta[http-equiv="refresh"]');
        if (!meta) {
          meta = document.createElement('meta');
          meta.httpEquiv = 'refresh';
          document.head.appendChild(meta);
        }
        meta.setAttribute('content', seconds + '; url=' + url);
      }

      function updateLink(url) {
        var link = document.getElementById('redirect-link');
        if (link) {
          link.href = url;
          link.textContent = url;
        }
      }

      function updateMessage(delay) {
        var message = document.getElementById('auto-redirect-message');
        if (message) {
          if (delay > 0) {
            var seconds = Math.ceil(delay / 1000);
            message.textContent = 'You will be redirected in ' + seconds + ' second' + (seconds === 1 ? '' : 's') + '.';
          } else {
            message.textContent = 'You are being redirected automatically.';
          }
        }
      }

      function redirect(url, delay) {
        if (delay === 0) {
          window.location.replace(url);
        } else {
          setTimeout(function () {
            window.location.assign(url);
          }, delay);
        }
      }

      document.addEventListener('DOMContentLoaded', function () {
        updateMetaRefresh(Math.max(0, Math.round(delayMs / 1000)), targetUrl);
        updateLink(targetUrl);
        updateMessage(delayMs);
      });

      if (targetUrl) {
        updateMetaRefresh(Math.max(0, Math.round(delayMs / 1000)), targetUrl);
        redirect(targetUrl, delayMs);
      }
    })();
  </script>
</head>
<body>
  <main>
    <h1>Redirecting to the RESST Web Experience</h1>
    <p id="auto-redirect-message">Preparing redirect…</p>
    <p>If the automatic redirect does not work, <a id="redirect-link" href="https://experience.arcgis.com/experience/b1eec438459e45c284df2fcf89e5d8e0">open the application manually</a>.</p>
  </main>
  <noscript>
    <p>JavaScript is required for the automatic redirect. Please <a href="https://experience.arcgis.com/experience/b1eec438459e45c284df2fcf89e5d8e0">open the RESST ArcGIS Web Experience</a>.</p>
  </noscript>
</body>
</html>
